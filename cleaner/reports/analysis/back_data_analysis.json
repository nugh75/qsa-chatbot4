{
  "directory": "/mnt/git/qsa-chatbot4/backend/app",
  "analysis_date": "2025-09-07T10:37:44.707501",
  "summary": {
    "total_files": 54,
    "unused_files_count": 14,
    "unused_files": [
      "config_backup.py",
      "embedding_providers.py",
      "scripts/apply_postgres_core_schema.py",
      "scripts/download_models.py",
      "scripts/download_whisper_models.py",
      "scripts/encrypt_existing_content.py",
      "scripts/export_core_sqlite_to_pg.py",
      "scripts/migrate_core_sqlite_to_postgres.py",
      "scripts/migrate_personalities_json_to_pg.py",
      "scripts/migrate_rag_sqlite_to_postgres.py",
      "scripts/pg_create_missing_tables.py",
      "scripts/test_config_backup_restore.py",
      "scripts/test_config_status.py",
      "scripts/test_summary_providers.py"
    ]
  },
  "files": {
    "tts.py": {
      "module_name": "tts",
      "imports": [
        "admin",
        "logging_utils"
      ],
      "imported_by": [
        "admin.py",
        "main.py"
      ],
      "external_imports": [
        "time",
        "edge_tts",
        "io",
        "TTS.api",
        "httpx",
        "asyncio",
        "fastapi",
        "pydantic",
        "os",
        "uuid",
        "piper.voice",
        "base64",
        "re",
        "fastapi.responses",
        "wave",
        "functools",
        "concurrent.futures",
        "piper",
        "tempfile",
        "soundfile"
      ]
    },
    "backup.py": {
      "module_name": "backup",
      "imports": [
        "personalities",
        "prompts",
        "auth",
        "welcome_guides"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "fastapi.responses",
        "uuid",
        "os",
        "io",
        "json",
        "typing",
        "datetime",
        "fastapi",
        "zipfile"
      ]
    },
    "__init__.py": {
      "module_name": "__init__",
      "imports": [],
      "imported_by": [],
      "external_imports": []
    },
    "conversation_routes.py": {
      "module_name": "conversation_routes",
      "imports": [
        "database",
        "logging_utils",
        "crypto_at_rest",
        "llm",
        "prompts",
        "auth",
        "admin"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "uuid",
        "io",
        "json",
        "hashlib",
        "typing",
        "traceback",
        "datetime",
        "zipfile",
        "re",
        "fitz",
        "fastapi",
        "pydantic",
        "fastapi.responses"
      ]
    },
    "scripts/test_summary_providers.py": {
      "module_name": "scripts.test_summary_providers",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "app.admin",
        "os",
        "asyncio",
        "sys",
        "json",
        "typing",
        "app.llm",
        "datetime"
      ]
    },
    "scripts/migrate_personalities_json_to_pg.py": {
      "module_name": "scripts.migrate_personalities_json_to_pg",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "os",
        "psycopg2",
        "psycopg2.extras",
        "json",
        "pathlib"
      ]
    },
    "scripts/pg_create_missing_tables.py": {
      "module_name": "scripts.pg_create_missing_tables",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "sys",
        "psycopg2",
        "os"
      ]
    },
    "mcp_manager.py": {
      "module_name": "mcp_manager",
      "imports": [],
      "imported_by": [
        "admin.py"
      ],
      "external_imports": [
        "subprocess",
        "pydantic",
        "asyncio",
        "json",
        "typing",
        "pathlib",
        "logging"
      ]
    },
    "memory.py": {
      "module_name": "memory",
      "imports": [],
      "imported_by": [
        "chat.py",
        "admin.py"
      ],
      "external_imports": [
        "json",
        "typing",
        "time",
        "pathlib"
      ]
    },
    "search_routes.py": {
      "module_name": "search_routes",
      "imports": [
        "database",
        "auth"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "hashlib",
        "typing",
        "re",
        "datetime",
        "fastapi",
        "pydantic"
      ]
    },
    "survey_routes.py": {
      "module_name": "survey_routes",
      "imports": [
        "database"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "fastapi",
        "secrets",
        "pydantic",
        "typing"
      ]
    },
    "forms_routes.py": {
      "module_name": "forms_routes",
      "imports": [
        "forms",
        "auth"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "fastapi",
        "typing",
        "__future__"
      ]
    },
    "data_tables.py": {
      "module_name": "data_tables",
      "imports": [
        "database"
      ],
      "imported_by": [
        "chat.py",
        "data_tables_routes.py",
        "admin.py",
        "data_tables_agent.py"
      ],
      "external_imports": [
        "csv",
        "dataclasses",
        "openpyxl",
        "os",
        "uuid",
        "io",
        "json",
        "typing",
        "re",
        "datetime",
        "fastapi",
        "pathlib",
        "__future__"
      ]
    },
    "password_utils.py": {
      "module_name": "password_utils",
      "imports": [],
      "imported_by": [
        "seed_admin.py",
        "auth.py"
      ],
      "external_imports": [
        "hashlib",
        "typing",
        "re",
        "bcrypt",
        "__future__"
      ]
    },
    "transcribe.py": {
      "module_name": "transcribe",
      "imports": [
        "logging_utils"
      ],
      "imported_by": [
        "admin.py",
        "main.py"
      ],
      "external_imports": [
        "time",
        "threading",
        "json",
        "requests",
        "torch",
        "shutil",
        "asyncio",
        "fastapi",
        "pydantic",
        "subprocess",
        "os",
        "uuid",
        "traceback",
        "typing",
        "re",
        "fastapi.responses",
        "warnings",
        "whisper",
        "tempfile",
        "pathlib"
      ]
    },
    "rag_routes.py": {
      "module_name": "rag_routes",
      "imports": [
        "logging_utils",
        "auth",
        "personalities",
        "file_processing",
        "rag_engine"
      ],
      "imported_by": [
        "chat.py",
        "main.py",
        "rag.py"
      ],
      "external_imports": [
        "os",
        "uuid",
        "sqlite3",
        "asyncio",
        "io",
        "tempfile",
        "typing",
        "datetime",
        "mimetypes",
        "pathlib",
        "fastapi",
        "pydantic",
        "fastapi.responses"
      ]
    },
    "rag.py": {
      "module_name": "rag",
      "imports": [
        "rag_engine",
        "rag_routes"
      ],
      "imported_by": [
        "chat.py",
        "admin.py"
      ],
      "external_imports": [
        "functools",
        "json",
        "typing",
        "re",
        "pathlib"
      ]
    },
    "personalities.py": {
      "module_name": "personalities",
      "imports": [
        "database"
      ],
      "imported_by": [
        "rag_routes.py",
        "chat.py",
        "main.py",
        "admin.py",
        "backup.py"
      ],
      "external_imports": [
        "shutil",
        "logging",
        "json",
        "typing",
        "re",
        "pathlib",
        "__future__"
      ]
    },
    "database.py": {
      "module_name": "database",
      "imports": [
        "crypto_at_rest"
      ],
      "imported_by": [
        "conversation_routes.py",
        "seed_admin.py",
        "search_routes.py",
        "escrow.py",
        "main.py",
        "auth_routes.py",
        "auth.py",
        "admin_panel.py",
        "forms.py",
        "queries_routes.py",
        "survey_routes.py",
        "data_tables_agent.py",
        "health_routes.py",
        "predefined_queries.py",
        "config_backup.py",
        "personalities.py",
        "chat.py",
        "rag_engine.py",
        "admin.py",
        "data_tables.py"
      ],
      "external_imports": [
        "os",
        "sqlite3",
        "math",
        "psycopg2",
        "psycopg2.extras",
        "hashlib",
        "typing",
        "datetime",
        "re",
        "contextlib",
        "pathlib"
      ]
    },
    "usage.py": {
      "module_name": "usage",
      "imports": [],
      "imported_by": [
        "chat.py",
        "admin.py"
      ],
      "external_imports": [
        "json",
        "typing",
        "datetime",
        "pathlib",
        "__future__"
      ]
    },
    "mcp_servers.py": {
      "module_name": "mcp_servers",
      "imports": [],
      "imported_by": [
        "admin.py"
      ],
      "external_imports": [
        "subprocess",
        "pydantic",
        "enum",
        "asyncio",
        "json",
        "__future__",
        "typing",
        "pathlib",
        "logging"
      ]
    },
    "prompts.py": {
      "module_name": "prompts",
      "imports": [],
      "imported_by": [
        "conversation_routes.py",
        "chat.py",
        "main.py",
        "admin.py",
        "backup.py"
      ],
      "external_imports": [
        "shutil",
        "json",
        "typing",
        "re",
        "pathlib",
        "logging"
      ]
    },
    "file_processing.py": {
      "module_name": "file_processing",
      "imports": [],
      "imported_by": [
        "admin.py",
        "rag_routes.py",
        "main.py"
      ],
      "external_imports": [
        "docx",
        "pypdf",
        "os",
        "uuid",
        "PyPDF2",
        "tempfile",
        "typing",
        "datetime",
        "mimetypes",
        "fitz",
        "fastapi",
        "pydantic",
        "fastapi.responses"
      ]
    },
    "scripts/apply_postgres_core_schema.py": {
      "module_name": "scripts.apply_postgres_core_schema",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "sys",
        "psycopg2",
        "os"
      ]
    },
    "forms.py": {
      "module_name": "forms",
      "imports": [
        "database"
      ],
      "imported_by": [
        "forms_routes.py"
      ],
      "external_imports": [
        "uuid",
        "json",
        "typing",
        "datetime",
        "re",
        "fastapi",
        "__future__"
      ]
    },
    "data_tables_routes.py": {
      "module_name": "data_tables_routes",
      "imports": [
        "auth",
        "data_tables"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "json",
        "typing",
        "fastapi",
        "fastapi.responses",
        "__future__"
      ]
    },
    "llm.py": {
      "module_name": "llm",
      "imports": [
        "admin"
      ],
      "imported_by": [
        "chat.py",
        "conversation_routes.py",
        "admin.py",
        "data_tables_agent.py"
      ],
      "external_imports": [
        "tiktoken",
        "os",
        "traceback",
        "json",
        "typing",
        "re",
        "httpx"
      ]
    },
    "seed_admin.py": {
      "module_name": "seed_admin",
      "imports": [
        "password_utils",
        "database"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "hashlib",
        "argparse",
        "os",
        "__future__"
      ]
    },
    "logging_utils.py": {
      "module_name": "logging_utils",
      "imports": [],
      "imported_by": [
        "queries_routes.py",
        "conversation_routes.py",
        "rag_routes.py",
        "chat.py",
        "main.py",
        "transcribe.py",
        "admin.py",
        "tts.py"
      ],
      "external_imports": [
        "os",
        "json",
        "datetime",
        "pathlib",
        "logging.handlers",
        "logging"
      ]
    },
    "scripts/encrypt_existing_content.py": {
      "module_name": "scripts.encrypt_existing_content",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "app.database",
        "app.crypto_at_rest"
      ]
    },
    "config_backup.py": {
      "module_name": "config_backup",
      "imports": [
        "database"
      ],
      "imported_by": [],
      "external_imports": [
        "dataclasses",
        "io",
        "json",
        "hashlib",
        "typing",
        "base64",
        "re",
        "datetime",
        "pathlib",
        "zipfile",
        "__future__"
      ]
    },
    "data_tables_agent.py": {
      "module_name": "data_tables_agent",
      "imports": [
        "database",
        "llm",
        "admin",
        "data_tables"
      ],
      "imported_by": [
        "chat.py",
        "admin.py"
      ],
      "external_imports": [
        "os",
        "json",
        "typing",
        "datetime",
        "re",
        "__future__"
      ]
    },
    "health_routes.py": {
      "module_name": "health_routes",
      "imports": [
        "database"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "fastapi",
        "datetime"
      ]
    },
    "escrow.py": {
      "module_name": "escrow",
      "imports": [
        "database",
        "auth"
      ],
      "imported_by": [
        "auth_routes.py"
      ],
      "external_imports": [
        "os",
        "cryptography.hazmat.primitives.kdf.pbkdf2",
        "base64",
        "json",
        "secrets",
        "cryptography.hazmat.primitives.asymmetric",
        "typing",
        "cryptography.hazmat.primitives.ciphers",
        "cryptography.hazmat.primitives"
      ]
    },
    "scripts/migrate_rag_sqlite_to_postgres.py": {
      "module_name": "scripts.migrate_rag_sqlite_to_postgres",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "os",
        "sqlite3",
        "psycopg2",
        "psycopg2.extras",
        "json"
      ]
    },
    "auth.py": {
      "module_name": "auth",
      "imports": [
        "password_utils",
        "database"
      ],
      "imported_by": [
        "queries_routes.py",
        "conversation_routes.py",
        "forms_routes.py",
        "rag_routes.py",
        "chat.py",
        "search_routes.py",
        "escrow.py",
        "data_tables_routes.py",
        "welcome_guides.py",
        "auth_routes.py",
        "admin.py",
        "backup.py",
        "admin_panel.py"
      ],
      "external_imports": [
        "jwt",
        "fastapi.security",
        "os",
        "base64",
        "hashlib",
        "secrets",
        "typing",
        "datetime",
        "cryptography.hazmat.primitives.ciphers",
        "bcrypt",
        "fastapi",
        "pydantic"
      ]
    },
    "main.py": {
      "module_name": "main",
      "imports": [
        "database",
        "welcome_guides",
        "tts",
        "forms_routes",
        "prompts",
        "personalities",
        "survey_routes",
        "logging_utils",
        "rag_routes",
        "backup",
        "transcribe",
        "conversation_routes",
        "queries_routes",
        "health_routes",
        "data_tables_routes",
        "search_routes",
        "chat",
        "file_processing",
        "auth_routes",
        "admin_panel",
        "seed_admin",
        "admin"
      ],
      "imported_by": [],
      "external_imports": [
        "fastapi.middleware.cors",
        "os",
        "dotenv",
        "threading",
        "json",
        "typing",
        "fastapi.staticfiles",
        "datetime",
        "contextlib",
        "pathlib",
        "fastapi",
        "pydantic",
        "stat"
      ]
    },
    "crypto_at_rest.py": {
      "module_name": "crypto_at_rest",
      "imports": [],
      "imported_by": [
        "conversation_routes.py",
        "database.py"
      ],
      "external_imports": [
        "typing",
        "cryptography.hazmat.primitives.ciphers",
        "os",
        "base64"
      ]
    },
    "scripts/test_config_status.py": {
      "module_name": "scripts.test_config_status",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "os",
        "asyncio",
        "sys",
        "json",
        "httpx",
        "pathlib"
      ]
    },
    "embedding_providers.py": {
      "module_name": "embedding_providers",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "sentence_transformers",
        "time",
        "os",
        "threading",
        "typing",
        "__future__"
      ]
    },
    "auth_routes.py": {
      "module_name": "auth_routes",
      "imports": [
        "escrow",
        "database",
        "auth"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "jwt",
        "uuid",
        "fastapi.security",
        "os",
        "typing",
        "datetime",
        "fastapi",
        "pydantic"
      ]
    },
    "queries_routes.py": {
      "module_name": "queries_routes",
      "imports": [
        "predefined_queries",
        "database",
        "auth",
        "logging_utils"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "csv",
        "io",
        "typing",
        "re",
        "fastapi",
        "pydantic",
        "fastapi.responses"
      ]
    },
    "rag_engine.py": {
      "module_name": "rag_engine",
      "imports": [
        "database"
      ],
      "imported_by": [
        "chat.py",
        "rag_routes.py",
        "admin.py",
        "rag.py"
      ],
      "external_imports": [
        "sentence_transformers",
        "faiss",
        "numpy",
        "os",
        "sqlite3",
        "langchain_text_splitters",
        "psycopg2.extras",
        "json",
        "hashlib",
        "typing",
        "datetime",
        "pickle",
        "pathlib",
        "logging"
      ]
    },
    "chat.py": {
      "module_name": "chat",
      "imports": [
        "rag",
        "memory",
        "database",
        "logging_utils",
        "usage",
        "llm",
        "prompts",
        "auth",
        "rag_engine",
        "rag_routes",
        "personalities",
        "data_tables_agent",
        "topic_router",
        "data_tables",
        "admin"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "time",
        "uuid",
        "os",
        "asyncio",
        "json",
        "hashlib",
        "typing",
        "re",
        "datetime",
        "importlib",
        "fastapi",
        "pydantic",
        "fastapi.responses"
      ]
    },
    "scripts/test_config_backup_restore.py": {
      "module_name": "scripts.test_config_backup_restore",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "os",
        "asyncio",
        "sys",
        "json",
        "tempfile",
        "httpx",
        "pathlib"
      ]
    },
    "scripts/migrate_core_sqlite_to_postgres.py": {
      "module_name": "scripts.migrate_core_sqlite_to_postgres",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "os",
        "sqlite3",
        "psycopg2",
        "psycopg2.extras",
        "typing"
      ]
    },
    "admin_panel.py": {
      "module_name": "admin_panel",
      "imports": [
        "database",
        "auth"
      ],
      "imported_by": [
        "main.py"
      ],
      "external_imports": [
        "time",
        "os",
        "json",
        "typing",
        "datetime",
        "fastapi",
        "pydantic"
      ]
    },
    "scripts/download_whisper_models.py": {
      "module_name": "scripts.download_whisper_models",
      "imports": [],
      "imported_by": [],
      "external_imports": []
    },
    "scripts/export_core_sqlite_to_pg.py": {
      "module_name": "scripts.export_core_sqlite_to_pg",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "sqlite3",
        "typing",
        "os"
      ]
    },
    "predefined_queries.py": {
      "module_name": "predefined_queries",
      "imports": [
        "database"
      ],
      "imported_by": [
        "queries_routes.py"
      ],
      "external_imports": [
        "datetime",
        "typing",
        "re",
        "__future__"
      ]
    },
    "scripts/download_models.py": {
      "module_name": "scripts.download_models",
      "imports": [],
      "imported_by": [],
      "external_imports": [
        "sentence_transformers",
        "torch",
        "os",
        "sys",
        "argparse",
        "whisper",
        "urllib.request",
        "pathlib",
        "__future__"
      ]
    },
    "topic_router.py": {
      "module_name": "topic_router",
      "imports": [
        "admin"
      ],
      "imported_by": [
        "chat.py"
      ],
      "external_imports": [
        "os",
        "functools",
        "json",
        "typing",
        "re",
        "unicodedata",
        "pathlib"
      ]
    },
    "welcome_guides.py": {
      "module_name": "welcome_guides",
      "imports": [
        "auth"
      ],
      "imported_by": [
        "admin.py",
        "backup.py",
        "main.py"
      ],
      "external_imports": [
        "uuid",
        "os",
        "threading",
        "json",
        "typing",
        "fastapi",
        "pydantic"
      ]
    },
    "admin.py": {
      "module_name": "admin",
      "imports": [
        "rag",
        "memory",
        "database",
        "welcome_guides",
        "tts",
        "logging_utils",
        "usage",
        "mcp_servers",
        "llm",
        "prompts",
        "auth",
        "personalities",
        "transcribe",
        "data_tables_agent",
        "file_processing",
        "data_tables",
        "mcp_manager",
        "rag_engine"
      ],
      "imported_by": [
        "conversation_routes.py",
        "topic_router.py",
        "llm.py",
        "chat.py",
        "main.py",
        "data_tables_agent.py",
        "tts.py"
      ],
      "external_imports": [
        "time",
        "glob",
        "threading",
        "io",
        "json",
        "TTS.api",
        "secrets",
        "fastapi.staticfiles",
        "string",
        "httpx",
        "shutil",
        "asyncio",
        "datetime",
        "bcrypt",
        "fastapi",
        "pydantic",
        "os",
        "uuid",
        "traceback",
        "typing",
        "re",
        "fastapi.responses",
        "zipfile",
        "csv",
        "sqlite3",
        "tempfile",
        "hashlib",
        "pathlib",
        "logging"
      ]
    }
  }
}